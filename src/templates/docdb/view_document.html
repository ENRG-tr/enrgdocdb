{% extends "docdb/base.html" %}
{% from "docdb/snippets/document.html" import render_document_table, render_document_authors, render_document_topics %}
{% from "docdb/snippets/user.html" import render_user %}
{% from "docdb/snippets/file.html" import render_files %}
{% from "docdb/snippets/moderation.html" import render_moderation_options with context %}
{% from "docdb/snippets/topic.html" import render_topics %}
{% from "docdb/snippets/author.html" import render_authors %}
{% block title %}
    {{ document.title }} - ENRG DocDB
{% endblock title %}
{% block content %}
    <h2>Document Details</h2>
    {{ render_moderation_options(document) }}
    <hr>
    <div class="document-details">
        <table class="table table-striped table-bordered">
            <tr>
                <th style="width: 25%">Title</th>
                <td>{{ document.title }}</td>
            </tr>
            <tr>
                <th>Abstract</th>
                <td>
                    {{ document.abstract.replace('\n', '<br>') }}
                </td>
            </tr>
            <tr>
                <th>Document Type</th>
                <td>{{ document.document_type.name }}</td>
            </tr>
            <tr>
                <th>Files</th>
                <td>{{ render_files(document.files) }}</td>
            </tr>
            <tr>
                <th>Uploaded By</th>
                <td>{{ render_user(document.user) }}</td>
            </tr>
            <tr>
                <th>Authors</th>
                <td>{{ render_authors(document.authors) }}</td>
            </tr>
            <tr>
                <th>Topics</th>
                <td>{{ render_topics(document.topics) }}</td>
            </tr>
            <tr>
                <th>Organization</th>
                <td>{{ document.organization.name }}</td>
            </tr>
            <tr>
                <th>Created at</th>
                <td>{{ document.created_at.strftime("%Y-%m-%d %H:%M:%S") }}</td>
            </tr>
            <tr>
                <th>Modified at</th>
                <td>{{ document.modified_at.strftime("%Y-%m-%d %H:%M:%S") }}</td>
            </tr>
        </table>
    </div>
{% endblock content %}
