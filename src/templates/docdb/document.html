{% extends "docdb/base.html" %}
{% from "docdb/snippets/document.html" import render_document_table, render_document_authors, render_document_topics %}
{% block title %}
    {{ document.title }} - ENRG DocDB
{% endblock title %}
{% block content %}
    <h2>Document Details</h2>
    <div class="document-details">
        <table class="table table-striped table-bordered">
            <tr>
                <th style="width: 25%">ID</th>
                <td>{{ document.id }}</td>
            </tr>
            <tr>
                <th>Title</th>
                <td>{{ document.title }}</td>
            </tr>
            <tr>
                <th>Abstract</th>
                <td>{{ document.abstract }}</td>
            </tr>
            <tr>
                <th>Document Type</th>
                <td>{{ document.document_type.name }}</td>
            </tr>
            <tr>
                <th>Files</th>
                <td>
                    {% for file in document.files %}
                        <span class="badge bg-primary">
                            {% if file.file_name.endswith(".pdf") %}
                                <i class="fas fa-file-pdf"></i>
                            {% elif file.file_name.endswith(".docx") %}
                                <i class="fas fa-file-word"></i>
                            {% elif file.file_name.endswith(".pptx") %}
                                <i class="fas fa-file-powerpoint"></i>
                            {% elif file.file_name.endswith(".xlsx") %}
                                <i class="fas fa-file-excel"></i>
                            {% elif file.file_name.endswith(".zip") %}
                                <i class="fas fa-file-archive"></i>
                            {% else %}
                                <i class="fas fa-file"></i>
                            {% endif %}
                        </span>
                        <a href="{{ url_for("document.download_file", file_id=file.id) }}"
                           target="_blank">{{ file.file_name }}</a>
                        {% if not loop.last %},{% endif %}
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th>Authors</th>
                <td>{{ render_document_authors(document.authors) }}</td>
                <tr>
                    <th>Topics</th>
                    <td>{{ render_document_topics(document.topics) }}</td>
                </tr>
            </tr>
            <tr>
                <th>Created at</th>
                <td>{{ document.created_at.strftime("%Y-%m-%d %H:%M:%S") }}</td>
            </tr>
            <tr>
                <th>Modified at</th>
                <td>{{ document.modified_at.strftime("%Y-%m-%d %H:%M:%S") }}</td>
            </tr>
        </table>
    </div>
{% endblock content %}
